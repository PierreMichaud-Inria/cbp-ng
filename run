#!/bin/bash

EXEC="$1"
TRACEFILE="$2"
OUTDIR="$3"

if [ "$OUTDIR" == "" ]; then
    OUTDIR="."
fi

WARMINST=1000000
SIMINST=40000000

FILENAME=$(basename "$TRACEFILE")
FILENAME="${FILENAME%.*}"
NAME="${FILENAME%_trace}"

$EXEC $TRACEFILE $NAME $WARMINST $SIMINST > $OUTDIR/$NAME.out
